@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix iadopt: <https://w3id.org/iadopt/ont/> .
@prefix shape: <https://w3id.org/iadopt/shacl/pattern/> .


shape:VDP18Shape
  a sh:NodeShape ;
  rdfs:label "Property: Flux (simple)" ;
  sh:target [
    a sh:SPARQLTarget ;
    sh:prefixes [ sh:declare [ sh:prefix "iadopt" ;   sh:namespace "https://w3id.org/iadopt/ont/"^^xsd:anyURI ; ] ] ,
                [ sh:declare [ sh:prefix "qudt" ;     sh:namespace "https://qudt.org/vocab/quantitykind/"^^xsd:anyURI ; ] ] ,
                [ sh:declare [ sh:prefix "envthes" ;  sh:namespace "http://vocabs.lter-europe.net/EnvThes/"^^xsd:anyURI ; ] ] ,
                [ sh:declare [ sh:prefix "wd" ;       sh:namespace "https://www.wikidata.org/entity/"^^xsd:anyURI ; ] ] ;
    sh:select """
      SELECT ?this
      WHERE {

        VALUES ?property {
          envthes:30361   # mass flux
          wd:Q3265048     # mass flow
          qudt:MassPerAreaTime
        }

        ?this
          a                   iadopt:Variable ;
          iadopt:hasProperty  ?property .

      }
      """ ;
  ] ;
  sh:closed false ;

  sh:property [
    sh:message "VDP18: ObjectOfInterest is no System." ;
    sh:path   iadopt:hasObjectOfInterest ;
    sh:and (
      [ sh:not [ sh:class iadopt:System ; ] ]
      [ sh:not [ sh:class iadopt:SymmetricSystem ; ] ]
      [ sh:not [ sh:class iadopt:AsymmetricSystem ; ] ]
    )
  ] ;

  sh:property [
    sh:message "VDP18: Matrix is a singular AsymmetricSystem." ;
    sh:path   iadopt:hasMatrix ;
    sh:class  iadopt:AsymmetricSystem ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:message "VDP18: Matrix uses hasSource in AsymmetricSystem." ;
    sh:path     ( iadopt:hasMatrix iadopt:hasSource ) ;
    sh:nodeKind sh:BlankNodeOrIRI ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:message "VDP18: Matrix uses hasTarget in AsymmetricSystem." ;
    sh:path     ( iadopt:hasMatrix iadopt:hasTarget ) ;
    sh:nodeKind sh:BlankNodeOrIRI ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  .
